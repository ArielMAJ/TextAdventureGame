<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Joginho Massa - AI Text Adventure</title>
<style>
    @keyframes slideInFromBottom {
        0% {
            transform: translateY(100%);
            opacity: 0;
        }
        100% {
            transform: translateY(0);
            opacity: 1;
        }
    }

    body {
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
        overflow-x: hidden;
    }

    .top-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background-color: #333;
        color: white;
        display: flex;
        align-items: center;
        padding: 0 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 1000;
    }

    .top-bar h1 {
        margin: 0;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-contents: center;
        gap: 10px;
    }

    .sidebar {
        height: 100%;
        width: 250px;
        position: fixed;
        top: 60px; /* Offset to sit below the top bar */
        left: -250px; /* Initially hidden */
        background-color: #333;
        color: #fff;
        overflow-x: hidden;
        transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        padding-top: 20px;
    }

    .sidebar a {
        padding: 10px 15px;
        text-decoration: none;
        font-size: 18px;
        color: #ddd;
        display: block;
        transition: color 0.3s;
    }

    .sidebar a:hover {
        color: #fff;
        background-color: #575757;
    }

    .toggle-button {
        font-size: 20px;
        cursor: pointer;
        background-color: #333;
        color: white;
        border: none;
        padding: 10px 15px;
        z-index: 1000;
        transition: background-color 0.3s ease;
    }

    .toggle-button:hover {
        background-color: #575757;
    }

    .sidebar.visible {
        left: 0;
    }

    .main-content {
        margin-top: 60px; /* Offset to sit below the top bar */
        margin-left: 0;
        transition: margin-left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .main-content.sidebar-visible {
        margin-left: 250px;
    }

    #textContainer {
        display: flex;
        flex-direction: column-reverse;
        overflow-y: auto;
        padding: 20px;
        height: calc(80vh - 60px); /* Adjusted to fit below the top bar */
        background-color: #f4f4f4;
        background-image: linear-gradient(white, #878787);
        border-top: 1px solid #ddd;
    }

    .message {
        padding: 1%;
        margin-top: 1.5%;
        background-color: #e1e1e1;
        font-size: large;
        border-radius: 15px;
        overflow-wrap: break-word;
        animation: slideInFromBottom 0.5s ease-out forwards;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    .ai-input {
        background-color: #212121;
        color: white;
    }

    #inputContainer {
        display: flex;
        padding: 10px;
        background-color: #ddd;
        border-top: 1px solid #bbb;
    }

    #inputField {
        flex: 1;
        padding: 10px;
        font-size: 16px;
    }

    #submitButton {
        padding: 10px 15px;
        font-size: 16px;
        margin-left: 10px;
        cursor: pointer;
    }
</style>
</head>
<body>

<div class="top-bar">
    <button class="toggle-button" id="toggleButton">☰</button>
    <h1>JOGINHO MASSA - AI TEXT ADVENTURE</h1>
</div>

<div class="sidebar" id="sidebar">
    <a></a>
    <a href="#chat">Chat1</a>
    <a href="#chat">Chat2</a>
    <a href="#chat">Chat3</a>
</div>

<div class="main-content" id="mainContent">
    <div id="textContainer">
        <div class="message ai-input">In the graying twilight of a drizzly autumn evening, a solitary figure stood at the crest of a weathered hill. The landscape below unfurled like a tapestry of muted emeralds and russet, the sprawling vale bordered by shadowy, ancient woods whispering secrets of forgotten times. Loric, a lone wanderer clad in a cloak the color of storm clouds, gazed out over this cresting wave of earth and nature with eyes that mirrored the shifting sky—stormy, yet with shards of determined light piercing through.<br /> <br />A chill breeze, sharp as a whetted blade, swept through, ruffling the edges of his cloak and teasing the tousled strands of his raven hair that fell into his contemplative brow. With a practiced hand, he tugged the woolen fabric closer around his shoulders, savoring its warmth against the encroaching bite of the season. In his other hand, he clutched a well-worn staff, its once-smooth wood now marred by the tales of miles traveled and the ghosts of battles survived.<br /><br />Loric’s journey had carried him through crumbling ruins where shadows breathed in the silence, across plains kissed by the sun’s embrace, and over treacherous mountain passes that held the very breath of winter in their rigid grasp. Each step was a story, each scar, a testament. Yet, there was a purpose that coursed like a relentless river beneath the surface of his wandering—a purpose drawn from whispers of prophecy, rumors of a realm teetering on the edge of oblivion, and the faintest hints of a lineage long untold.<br /><br />Below, nestled snugly beneath the embrace of the hills, a village began to stir to life under the veil of early dusk. Flickering torchlights winked like fireflies as the villagers busied themselves, unaware of the lone traveler overlooking their peaceful existence. Smoke curled from hearths, weaving into the tapestry of the sky, carrying with it the scent of home and hearth—reminders of a life that Loric had yet to claim.<br /><br />He had heard the tales, woven by bards and storytellers, of a sacred artifact hidden deep within the ruins of the Lost Keep—a talisman said to hold the power to unmock the bonds of chaos threatening to spill over the land. It was toward this enigma that Loric's journey was now bent, an adventure unfurling like a skein of fate through the unfamiliar paths ahead. But first, a rest was needed—a night among strangers who might yet become allies. With a deep breath, Loric started down the hill, step by steadfast step, toward the village cradled in the heart of the valley, ready to embrace whatever this rumorous night might reveal.</div>
    </div>

    <div id="inputContainer">
        <input type="text" id="inputField" placeholder="Enter text here">
        <button id="submitButton">Submit</button>
    </div>
</div>

<script>
    const toggleButton = document.getElementById('toggleButton');
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('mainContent');

    toggleButton.addEventListener('click', () => {
        sidebar.classList.toggle('visible');
        mainContent.classList.toggle('sidebar-visible');
    });

    function lowercaseFirstChar(str) {
        if (!str) return str;
        return str.charAt(0).toLowerCase() + str.slice(1);
    }

    const textContainer = document.getElementById('textContainer');
    const inputField = document.getElementById('inputField');
    const submitButton = document.getElementById('submitButton');

    submitButton.addEventListener('click', () => {
        const text = inputField.value.trim();
        if (text) {
            const message = document.createElement('div');
            message.className = 'message';
            message.textContent = "> You " + lowercaseFirstChar(text);
            textContainer.insertBefore(message, textContainer.firstChild);
            inputField.disabled = true;
            inputField.value = '';
            fetchData();
        }
    });

    inputField.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') submitButton.click();
    });

    function fetchData() {
        const name = 'Teste';
        fetch(`/get_data?name=${encodeURIComponent(name)}`)
            .then(response => response.json())
            .then(data => {
                create_AI_response(data.message);
            })
            .catch(error => console.error('Error:', error));
    }

    function create_AI_response(message) {
        const message_ai_teste = document.createElement('div');
        message_ai_teste.className = 'message ai-input';
        message_ai_teste.textContent = message;
        textContainer.insertBefore(message_ai_teste, textContainer.firstChild);
        inputField.disabled = false;
        inputField.focus();
    }
</script>

</body>
</html>
